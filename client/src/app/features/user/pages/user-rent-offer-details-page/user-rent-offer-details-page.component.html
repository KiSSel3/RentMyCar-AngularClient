<div class="edit-offer-container" *ngIf="!isLoading">
  <h1>Edit Rent Offer</h1>
  <div class="section images-section">
    <h2>Edit Images</h2>
    <label class="upload-label" for="images">
      <mat-icon>upload</mat-icon>
      <span>Click or drag images here</span>
      <input type="file" id="images" multiple (change)="onImageSelected($event)" accept="image/*" hidden />
    </label>
    <div class="images-preview">
      <div *ngFor="let image of existingImages; let i = index" class="image-container">
        <img [src]="'data:image/png;base64,' + image.image" alt="Preview" />
        <button mat-icon-button color="warn" (click)="removeImage(i, image.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
      <div *ngFor="let image of newImages; let i = index" class="image-container">
        <img [src]="image.previewUrl" alt="Preview" />
        <button mat-icon-button color="warn" (click)="removeNewImage(i)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>
  </div>
  <form [formGroup]="editForm" (ngSubmit)="submit()">
    <div class="section">
      <h2>Edit Car</h2>
      <div class="cars-grid">
        <app-car-card
          *ngFor="let car of cars"
          [car]="car"
          [selected]="editForm.get('carId')?.value === car.id"
          (carSelected)="selectCar($event)"
        ></app-car-card>
      </div>
    </div>

    <div class="section">
      <h2>Location</h2>
      <div class="custom-input" formGroupName="locationModel">
        <label>
          <span>City</span>
          <input type="text" formControlName="city" />
        </label>
        <label>
          <span>Street</span>
          <input type="text" formControlName="street" />
        </label>
        <label>
          <span>Building</span>
          <input type="text" formControlName="building" />
        </label>
      </div>
    </div>

    <div class="section">
      <h2>Availability & Pricing</h2>
      <div class="custom-input">
        <label>
          <span>Available From</span>
          <input type="date" formControlName="availableFrom" />
        </label>
        <label>
          <span>Available To</span>
          <input type="date" formControlName="availableTo" />
        </label>
        <label>
          <span>Price Per Day</span>
          <input type="number" formControlName="pricePerDay" />
        </label>
      </div>
    </div>

    <div class="section">
      <h2>Description</h2>
      <div class="custom-textarea">
        <label>
          <span>Description</span>
          <textarea formControlName="description" (input)="autoResize($event)"></textarea>
        </label>
      </div>
    </div>
    <div class="section">
      <h2>Availability</h2>
      <div class="custom-checkbox">
        <label>
          <input type="checkbox" formControlName="isAvailable" />
          <span>Is Available</span>
        </label>
      </div>
    </div>
    <div class="actions">
      <button class="custom-button" type="submit" [disabled]="editForm.invalid">
        Save Changes
      </button>
    </div>
  </form>
</div>
